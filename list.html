<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="req-form.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <title> Requisitioning Form </title>
    <style>
        table, th, td 
        {
            margin:10px 0;
            border:solid 1px #333;
            padding:2px 4px;
            font:15px Verdana;
        }
        th {
            font-weight:bold;
        }
        body {
          margin: 10px;
        }
        table {
          margin: 20px;
        }
        tr {
          margin: 10px;
        }
    </style>
  </head>

  <body>

    <div class="header">
      <div class="header-left"><a href="#"> Requisitions</a></div>
      <div class="header-right">
        <a href="new-form.html">Add </a>
        <a href="form.html">Edit </a>
        <a href="list.html">List </a>
      </div>
    </div>

  </br>
    <div id="showData"></div>

    <footer>
    </footer> 

    <script>
    function CreateTableFromJSON() {
        var myRequisitions = [
      {
        "requisitionId": "1",
        "requisitionDate": "10-06-17",
        "vendorId": "1",
        "justification": "Requesting Open Purchase order for school bus engine and mechanical services for MOE School Buses that needs extensive monthly upkeep to prolong their services to the Ministry. Vendor is selected based on their experience with servicing MOE buses. This request will cover costs and expenses for this first (1st) quarter fiscal year 2018.",
        "itemDescription": "Open PO for School Bus Engine & Mechanical Services",
        "quantity": "1",
        "unit": "Lot",
        "price": "5000",
        "extended": "5000"
      },
      {
        "requisitionId": "16",
        "requisitionDate": "10-07-17",
        "vendorId": "1",
        "justification": "Requesting Open Purchase order for vehicle service/maintenance for MOE vehicles that need monthly maintenance to prolong its running life. Vendor is selected based on their experience with servicing MOE vehicles. This request will cover costs and expenses for this first (1st) quarter fiscal year 2018. *See attached lists of MOE vehicles and quotes.",
        "itemDescription": "Open PO for Vehicle Service and Maintenance",
        "quantity": "1",
        "unit": "Lot",
        "price": "5000",
        "extended": "5000"
      },
      {
        "requisitionId": "4",
        "requisitionDate": "10-11-17",
        "vendorId": "4",
        "justification": "Requesting items to be used at Meyuns and G.B Harris Elementary School.",
        "itemDescription": "Light Bulb (indoor/outdoor",
        "quantity": "100",
        "unit": "Each",
        "price": "8.99",
        "extended": "244.75"
      },
      {
        "requisitionId": "5",
        "requisitionDate": "10-11-17",
        "vendorId": "5",
        "justification": "Requesting items to be used at George B. Harris Elementary School.",
        "itemDescription": "Trimmer Head",
        "quantity": "4",
        "unit": "Each",
        "price": "26.25",
        "extended": "105"
      },
      {
        "requisitionId": "5",
        "requisitionDate": "10-11-17",
        "vendorId": "5",
        "justification": "Requesting items to be used at George B. Harris Elementary School.",
        "itemDescription": "Mop Head",
        "quantity": "10",
        "unit": "Each",
        "price": "8.85",
        "extended": "88.5"
      },
      {
        "requisitionId": "5",
        "requisitionDate": "10-11-17",
        "vendorId": "5",
        "justification": "Requesting items to be used at George B. Harris Elementary School.",
        "itemDescription": "Mop Handle",
        "quantity": "10",
        "unit": "Each",
        "price": "14.75",
        "extended": "147.5"
      },
      {
        "requisitionId": "6",
        "requisitionDate": "10-11-17",
        "vendorId": "6",
        "justification": "Requesting PETTY CASH to purchase this item to be used at MOE-IT Office.",
        "itemDescription": "Magnifier Desk Lamp",
        "quantity": "1",
        "unit": "Each",
        "price": "41.49",
        "extended": "41.49"
      },
      {
        "requisitionId": "17",
        "requisitionDate": "11-02-17",
        "vendorId": "7",
        "justification": "Requesting items to be used to support school activities and programs at George B. Harris Elementary School. School Year 17-18.",
        "itemDescription": "Copier Machine",
        "quantity": "1",
        "unit": "Each",
        "price": "6850",
        "extended": "6850"
      },
      {
        "requisitionId": "8",
        "requisitionDate": "10-11-17",
        "vendorId": "8",
        "justification": "Request PETTY CASH to pay invoices for Instructional Supplies for P.E.",
        "itemDescription": "Handling Charges",
        "quantity": "1",
        "unit": "Each",
        "price": "24.99",
        "extended": "24.99"
      },
      {
        "requisitionId": "8",
        "requisitionDate": "10-11-17",
        "vendorId": "8",
        "justification": "Request PETTY CASH to pay invoices for Instructional Supplies for P.E.",
        "itemDescription": "Wharfage Charges",
        "quantity": "1",
        "unit": "Each",
        "price": "3.53",
        "extended": "3.53"
      },
      {
        "requisitionId": "8",
        "requisitionDate": "10-11-17",
        "vendorId": "8",
        "justification": "Request PETTY CASH to pay invoices for Instructional Supplies for P.E.",
        "itemDescription": "EA Fee",
        "quantity": "1",
        "unit": "Each",
        "price": "10",
        "extended": "10"
      },
      {
        "requisitionId": "14",
        "requisitionDate": "10-06-17",
        "vendorId": "9",
        "justification": "Requesting Open Purchase order for vehicle service/maintenance for MOE vehicles that need monthly maintenance to prolong its running life. Vendor is selected based on their experience with servicing MOE vehicles. This request will cover costs and expenses for this fourth (4th) quarter fiscal year 2017.",
        "itemDescription": "Open PO for",
        "quantity": "1",
        "unit": "Lot",
        "price": "5000",
        "extended": "5000"
      },
      {
        "requisitionId": "13",
        "requisitionDate": "10-04-17",
        "vendorId": "13",
        "justification": "Requesting Open Purchase Order for Instructional Supplies for all MOE Public School in preparation school year SY17-18.",
        "itemDescription": "Open PO for Instructional Supplies",
        "quantity": "1",
        "unit": "Lot",
        "price": "20000",
        "extended": "20000"
      }
        ]

        // EXTRACT VALUE FOR HTML HEADER. 
        // ('Book ID', 'Book Name', 'Category' and 'Price')
        var col = [];
        for (var i = 0; i < myRequisitions.length; i++) {
            for (var key in myRequisitions[i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
        }

        // CREATE DYNAMIC TABLE.
        var table = document.createElement("table");

        // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

        var tr = table.insertRow(-1);                   // TABLE ROW.

        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");      // TABLE HEADER.
            th.innerHTML = col[i];
            tr.appendChild(th);
        }

        // ADD JSON DATA TO THE TABLE AS ROWS.
        for (var i = 0; i < myRequisitions.length; i++) {

            tr = table.insertRow(-1);

            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = myRequisitions[i][col[j]];
            }

            var x = tr.insertCell(-1);
            var a = document.createElement('a');
            a.setAttribute('href',"form.html?rqid="+myRequisitions[i][col[0]]);
            a.innerHTML = "edit";
            x.appendChild(a);
        }

        // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
        var divContainer = document.getElementById("showData");
        divContainer.innerHTML = "";
        divContainer.appendChild(table);
    }


    window.onload = CreateTableFromJSON();
  </script>
  </body>
</html>
